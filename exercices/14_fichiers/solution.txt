SOLUTION EXERCICE 1 : Créer et écrire
```c
#include <stdio.h>

int main() {
    FILE *fichier = fopen("message.txt", "w");

    if (fichier == NULL) {
        printf("Erreur d'ouverture\n");
        return 1;
    }

    fprintf(fichier, "Première ligne\n");
    fprintf(fichier, "Deuxième ligne\n");
    fprintf(fichier, "Troisième ligne\n");

    fclose(fichier);
    printf("Fichier créé avec succès\n");

    return 0;
}
```

SOLUTION EXERCICE 2 : Lire un fichier
```c
#include <stdio.h>

int main() {
    FILE *fichier = fopen("message.txt", "r");

    if (fichier == NULL) {
        printf("Erreur de lecture\n");
        return 1;
    }

    char ligne[256];
    printf("Contenu du fichier:\n");
    while (fgets(ligne, sizeof(ligne), fichier)) {
        printf("%s", ligne);
    }

    fclose(fichier);
    return 0;
}
```

SOLUTION EXERCICE 3 : Append
```c
#include <stdio.h>

int main() {
    FILE *fichier = fopen("message.txt", "a");

    if (fichier == NULL) {
        printf("Erreur d'ouverture\n");
        return 1;
    }

    fprintf(fichier, "Quatrième ligne (ajoutée)\n");
    fprintf(fichier, "Cinquième ligne (ajoutée)\n");

    fclose(fichier);
    printf("Lignes ajoutées avec succès\n");

    return 0;
}
```

SOLUTION EXERCICE 4 : Compter les lignes
```c
#include <stdio.h>

int compter_lignes(const char *nom_fichier) {
    FILE *fichier = fopen(nom_fichier, "r");

    if (fichier == NULL) {
        return -1;
    }

    int compteur = 0;
    char ligne[256];

    while (fgets(ligne, sizeof(ligne), fichier)) {
        compteur++;
    }

    fclose(fichier);
    return compteur;
}

int main() {
    int nb_lignes = compter_lignes("message.txt");

    if (nb_lignes == -1) {
        printf("Erreur de lecture\n");
        return 1;
    }

    printf("Le fichier contient %d lignes\n", nb_lignes);
    return 0;
}
```

SOLUTION EXERCICE 5 : Copier un fichier
```c
#include <stdio.h>

int main() {
    FILE *source = fopen("message.txt", "r");
    FILE *destination = fopen("copie.txt", "w");

    if (source == NULL || destination == NULL) {
        printf("Erreur d'ouverture\n");
        if (source) fclose(source);
        if (destination) fclose(destination);
        return 1;
    }

    char buffer[256];
    while (fgets(buffer, sizeof(buffer), source)) {
        fputs(buffer, destination);
    }

    fclose(source);
    fclose(destination);

    printf("Fichier copié avec succès\n");
    return 0;
}
```

SOLUTION EXERCICE 6 : Fichier binaire
```c
#include <stdio.h>

int main() {
    int nombres[5] = {10, 20, 30, 40, 50};

    // Écriture
    FILE *fichier = fopen("nombres.bin", "wb");
    if (fichier == NULL) return 1;

    fwrite(nombres, sizeof(int), 5, fichier);
    fclose(fichier);
    printf("Nombres écrits en binaire\n");

    // Lecture
    int nombres_lus[5];
    fichier = fopen("nombres.bin", "rb");
    if (fichier == NULL) return 1;

    fread(nombres_lus, sizeof(int), 5, fichier);
    fclose(fichier);

    printf("Nombres lus: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", nombres_lus[i]);
    }
    printf("\n");

    return 0;
}
```

SOLUTION EXERCICE 7 : Structure en fichier
```c
#include <stdio.h>
#include <string.h>

typedef struct {
    char nom[50];
    int age;
} Personne;

int main() {
    Personne personnes[3] = {
        {"Alice", 25},
        {"Bob", 30},
        {"Charlie", 35}
    };

    // Écriture
    FILE *fichier = fopen("personnes.dat", "wb");
    if (fichier == NULL) return 1;

    fwrite(personnes, sizeof(Personne), 3, fichier);
    fclose(fichier);
    printf("Personnes sauvegardées\n");

    // Lecture
    Personne personnes_lues[3];
    fichier = fopen("personnes.dat", "rb");
    if (fichier == NULL) return 1;

    fread(personnes_lues, sizeof(Personne), 3, fichier);
    fclose(fichier);

    printf("Personnes lues:\n");
    for (int i = 0; i < 3; i++) {
        printf("%d. %s - %d ans\n",
               i+1, personnes_lues[i].nom, personnes_lues[i].age);
    }

    return 0;
}
```

SOLUTION EXERCICE 8 : Vérifier existence
```c
#include <stdio.h>

int fichier_existe(const char *nom_fichier) {
    FILE *fichier = fopen(nom_fichier, "r");

    if (fichier == NULL) {
        return 0;  // N'existe pas
    }

    fclose(fichier);
    return 1;  // Existe
}

int main() {
    if (fichier_existe("message.txt")) {
        printf("Le fichier 'message.txt' existe\n");
    } else {
        printf("Le fichier 'message.txt' n'existe pas\n");
    }

    if (fichier_existe("inexistant.txt")) {
        printf("Le fichier 'inexistant.txt' existe\n");
    } else {
        printf("Le fichier 'inexistant.txt' n'existe pas\n");
    }

    return 0;
}
```
